{% extends "base.html" %}

{% block title %}Open Cases - Case Clicker{% endblock %}

{% block content %}
<h1>CS2 Case Opener</h1>

<div class="cases-grid">
    <div class="case">
        <img src="{{ url_for('static', filename='media/cases/weapon_case_1.png') }}" alt="CS:GO Weapon Case" class="case-image">
        <h3>CS:GO Weapon Case</h3>
        <p class="case-price">Price: $2.50</p>
        <button class="btn" onclick="openCase('csgo')">Open Case</button>
    </div>
    <div class="case">
        <img src="{{ url_for('static', filename='media/cases/esports_2013_case.png') }}" alt="eSports 2013 Case" class="case-image">
        <h3>eSports 2013 Case</h3>
        <p class="case-price">Price: $2.50</p>
        <button class="btn" onclick="openCase('esports')">Open Case</button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    async function openCase(caseType) {
        const response = await fetch(`/open/${caseType}`);
        const data = await response.json();
        
        if (data.error) {
            alert(data.error);
            return;
        }

        document.getElementById('balance').textContent = data.balance;
        alert(`You unboxed: ${data.item.stattrak ? 'StatTrakâ„¢ ' : ''}${data.item.weapon} | ${data.item.name} (${data.item.wear.replace('_', ' ')})`);
    }
</script>
{% endblock %} 