{% extends "base.html" %}

{% block title %}Achievements - Case Clicker{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/achievements.css') }}">

<div class="achievements-container">
    <div class="achievements-header">
        <h1>Achievements</h1>
        <p>Track your progress and earn rewards</p>
    </div>

    <div class="achievements-summary">
        <div class="summary-stat">
            <h3>{{ completed_count }}/{{ total_count }}</h3>
            <p>Achievements Completed</p>
        </div>
        <div class="summary-stat">
            <h3>{{ completion_rate }}%</h3>
            <p>Completion Rate</p>
        </div>
        <div class="summary-stat">
            <h3>${{ '{:,.0f}'.format(total_rewards) }}</h3>
            <p>Total Rewards Earned</p>
        </div>
    </div>

    <div class="category-filter">
        <button class="category-btn active" data-category="all">All</button>
        <button class="category-btn" data-category="cases">Cases</button>
        <button class="category-btn" data-category="trading">Trading</button>
        <button class="category-btn" data-category="casino">Casino</button>
        <button class="category-btn" data-category="clicker">Clicker</button>
        <button class="category-btn" data-category="inventory">Inventory</button>
        <button class="category-btn" data-category="special">Special</button>
        <button class="category-btn" data-category="completed">Completed</button>
    </div>

    <div class="achievements-grid">
        {% for achievement in achievements %}
        <div class="achievement-card {% if not achievement.completed %}locked{% endif %}" 
             data-category="{{ 'completed' if achievement.completed else achievement.category }}">
            <div class="achievement-icon">{{ achievement.icon }}</div>
            <div class="achievement-title">{{ achievement.title }}</div>
            <div class="achievement-description">{{ achievement.description }}</div>
            <div class="achievement-progress">
                <div class="achievement-progress-bar" style="width: {{ achievement.progress }}%"></div>
            </div>
            <div class="achievement-stats">
                <span>{{ '{:,.0f}'.format(achievement.current_value) }}/{{ '{:,.0f}'.format(achievement.target_value) }}</span>
                <div class="achievement-rewards">
                    <span class="achievement-reward money">ðŸ’° ${{ '{:,.0f}'.format(achievement.reward) }}</span>
                    <span class="achievement-reward exp">âœ¨ {{ '{:,.0f}'.format(achievement.exp_reward) }} EXP</span>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const categoryButtons = document.querySelectorAll('.category-btn');
    const achievementCards = document.querySelectorAll('.achievement-card');

    // Function to filter achievements
    function filterAchievements(category) {
        achievementCards.forEach(card => {
            if (category === 'all' && card.dataset.category !== 'completed') {
                card.style.display = 'block';
            } else if (category !== 'all' && card.dataset.category === category) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }

    categoryButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Remove active class from all buttons
            categoryButtons.forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            button.classList.add('active');

            const category = button.dataset.category;
            filterAchievements(category);
        });
    });

    // Initial filtering for 'all' category on page load
    filterAchievements('all');
});
</script>
{% endblock %} 